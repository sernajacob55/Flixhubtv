<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FlixHubTV</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Top bar -->
  <div class="topbar">
    <div class="wrapper topbar-inner">
      <h1 id="brand">FlixHubTV</h1>
      <div class="controls">
        <input type="search" id="searchInput" placeholder="Search movies..." />
        <a href="index.html" class="btn btn-ghost">Home</a>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="wrapper">
    <div class="section">
      <h2>Browse Movies</h2>
      <div class="movie-grid" id="movieGrid">
        <!-- Movie cards injected here -->
      </div>
    </div>
  </div>

  <script>
    // Simple static movie list (extend as you add movies)
    const movies = [
      { id: "1", title: "The Matrix" },
      { id: "2", title: "Inception" },
      { id: "3", title: "Interstellar" }
    ];

    const grid = document.getElementById("movieGrid");

    // Build cards dynamically
    function renderMovies(list) {
      grid.innerHTML = "";
      list.forEach(m => {
        const card = document.createElement("a");
        card.className = "card";
        card.href = `movie.html?id=${m.id}`;
        card.innerHTML = `
          <img src="assets/posters/placeholder.jpg" alt="${m.title} poster" id="poster-${m.id}">
          <div class="title">${m.title}</div>
        `;
        grid.appendChild(card);
      });
    }

    // Initial render
    renderMovies(movies);

    // Search filter
    const searchInput = document.getElementById("searchInput");
    searchInput.addEventListener("input", () => {
      const q = searchInput.value.toLowerCase();
      const filtered = movies.filter(m => m.title.toLowerCase().includes(q));
      renderMovies(filtered);
    });

    // === Step 4 prep: auto metadata fetch for grid posters ===
    async function fetchPoster(title, id) {
      const API_KEY = "YOUR_OMDB_API_KEY";
      const url = `https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${API_KEY}`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data && data.Poster && data.Poster !== "N/A") {
          const img = document.getElementById(`poster-${id}`);
          if (img) img.src = data.Poster;
        }
      } catch (err) {
        console.error("Poster fetch failed for", title, err);
      }
    }

    // Populate posters after render
    movies.forEach(m => fetchPoster(m.title, m.id));
  </script>
</body>
</html>