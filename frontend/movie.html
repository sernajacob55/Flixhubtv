<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Info - FlixHubTV</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="sidebar">
    <a href="index.html">üè† Home</a>
  </div>

  <div class="main">
    <div id="movieDetails" class="movie-info"></div>
    <div id="videoContainer" class="hidden">
      <button id="closeBtn">‚úñ</button>
      <video id="moviePlayer" controls></video>
    </div>
  </div>

  <script>
    // üîí Security check: redirect if not logged in
    if (!localStorage.getItem("flixhubtv_profile")) {
      window.location.href = "login.html";
    }

    const urlParams = new URLSearchParams(window.location.search);
    const movieId = parseInt(urlParams.get("id"));

    const movies = [
      {
        id: 1,
        title: "The Matrix",
        genre: "Sci-Fi",
        year: 1999,
        runtime: "2h 16m",
        description: "A computer hacker learns about the true nature of reality and his role in the war against its controllers.",
        cover: "matrix.jpg",
        video: "https://download1351.mediafire.com/3yzrkgjjifhg-kBE2HT1i1X9UAOckBG5zokIOlih39t_HouFQji-qXpatH5FZw4-C20r5fD-Do-cJ7MyM7aRD8Uhz-BWQJcs5amcyCuEtcHjyhO0h9VWx1VfHxjIiSyiHJGpXfJ7VTnSDmR4Snc7RL0MH0eoZtOMVXw0Pr_Jfhb4N3Y/rks796idw5xqo2i/The+Matrix.mp4"
      }
    ];

    const movie = movies.find(m => m.id === movieId);
    const detailsDiv = document.getElementById("movieDetails");
    const videoContainer = document.getElementById("videoContainer");
    const videoPlayer = document.getElementById("moviePlayer");
    const closeBtn = document.getElementById("closeBtn");

    if (movie) {
      detailsDiv.innerHTML = `
        <img src="${movie.cover}" alt="${movie.title}">
        <div>
          <h2>${movie.title}</h2>
          <p><strong>Genre:</strong> ${movie.genre}</p>
          <p><strong>Year:</strong> ${movie.year}</p>
          <p><strong>Runtime:</strong> ${movie.runtime}</p>
          <p>${movie.description}</p>
          <button onclick="playMovie()">‚ñ∂ Play</button>
        </div>
      `;
    } else {
      detailsDiv.innerHTML = "<p>Movie not found.</p>";
    }

    function playMovie() {
      videoPlayer.src = movie.video;
      videoContainer.classList.remove("hidden");
      videoPlayer.requestFullscreen().catch(() => {});
      videoPlayer.play();
    }

    closeBtn.onclick = () => {
      videoPlayer.pause();
      videoPlayer.src = "";
      videoContainer.classList.add("hidden");
      document.exitFullscreen().catch(() => {});
    };
  </script>
</body>
</html>